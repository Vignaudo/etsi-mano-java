plugins {
	id 'war'
	id 'antlr'
	id 'eclipse-wtp'
	id 'org.springframework.boot' version '2.1.5.RELEASE'
	id 'org.sonarqube' version '2.7.1'
	id 'io.spring.dependency-management' version '1.0.8.RELEASE'
}


repositories {
	
	maven {
		url 'http://repo.spring.io/plugins-release/'
	}
	
	maven {
		url 'https://repository.jboss.org/maven2/'
	}
	
	maven {
		url 'https://maven.repository.redhat.com/ga/'
	}
	
	mavenCentral()
}


sonarqube {
	properties {
		property "sonar.projectName", "etsi-mano"
	}
}

group = 'com.ubiqube'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = 1.8

repositories {
	mavenCentral()
	flatDir {
		dirs 'sharedLib/ubiqube'
	}
}

dependencies {
	testCompile group: 'junit', name: 'junit', version: '4.12'
	testCompile group: 'commons-jxpath', name: 'commons-jxpath', version: '1.3'
	
	compile group: 'org.glassfish.jersey.media', name: 'jersey-media-multipart', version: '2.28'
	compile group: 'org.apache.httpcomponents', name: 'httpclient', version: '4.5.9'
	compile group: 'net.sf.json-lib', name: 'json-lib', version: '2.4', classifier: 'jdk15'
	compile group: "com.github.fge", name: "json-patch", version: '1.9'
	
	compile group: 'io.swagger.core.v3', name: 'swagger-jaxrs2', version: '2.0.8' 
	compile group: 'io.swagger', name: 'swagger-annotations', version: '1.5.22'
	
	compile group: 'org.antlr', name: 'antlr4-runtime', version: '4.5.3'
	
	compile name: 'ubi-api-client'
	compile name: 'ubi-jcommons'
	
	compile(group: 'org.jboss.jbossas', name: 'jboss-as-client', version: '5.1.0.GA') {
		exclude group: 'javax.security', module: 'jaas'
		exclude group: 'javax.security', module: 'jacc'
		exclude group: 'org.slf4j', module: 'slf4j-api'
		exclude group: 'org.jboss.slf4j', module: 'slf4j-jboss-logging'
	}
	
	compile group: 'org.jboss.naming', name: 'jnp-client', version: '5.0.5.Final'
	compile group: 'concurrent', name: 'concurrent', version: '1.3.4'
	compile group: 'commons-io', name: 'commons-io', version: '1.4'
	
	compile(group: 'org.springframework.boot', name: 'spring-boot-starter-jersey') {
		
		exclude group: 'org.springframework.boot', module: 'spring-boot-starter-logging'
		exclude group: 'org.hibernate.validator', module: 'hibernate-validator'
	}
	compile group: 'org.apache.bval', name: 'bval-jsr', version: '1.1.2'
	
	compile("org.springframework.boot:spring-boot-starter-security")
}

springBoot {
	mainClassName = 'com.ubiqube.etsi.mano.config.JerseyConfig'
}
generateGrammarSource {
    maxHeapSize = "64m"
    arguments += ["-visitor", "-long-messages"]
}

task copyDependencies(type: Copy) {
   from configurations.compile
   into 'dependencies'
}

